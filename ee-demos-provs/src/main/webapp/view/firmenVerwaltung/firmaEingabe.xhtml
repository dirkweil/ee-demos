<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:prime="http://primefaces.org/ui"
  xmlns:provs="http://java.sun.com/jsf/composite/components/provs">

<h:head></h:head>

<h:body>
  <ui:composition template="/WEB-INF/templates/provs_template.xhtml">
    <ui:define name="content">
      <prime:layoutUnit position="center">
        <h:form id="formFirma">
          <h:panelGrid
            columns="3"
            rules="none"
            width="100%"
            columnClasses="leftAlign,leftAlign,rightAlign">

            <h2>Firmendaten bearbeiten</h2>
            <h:panelGroup />
            <h:panelGroup>
              <prime:commandButton
                id="buttonSpeichern"
                icon="ui-icon-arrowthickstop-1-s"
                value="speichern"
                ajax="false"
                action="#{firmenVerwaltungModel.save}" />
              <prime:commandButton
                id="buttonAbbrechen"
                icon="ui-icon-arrowreturnthick-1-w"
                value="abbrechen"
                ajax="false"
                action="#{firmenVerwaltungModel.cancel}"
                immediate="true" />
            </h:panelGroup>

            <h:outputLabel
              value="Name:"
              for="firmaName" />
            <prime:inputText
              value="#{firmenVerwaltungModel.currentFirma.name}"
              size="100"
              id="firmaName" />
            <prime:message
              for="firmaName"
              display="text" />
          </h:panelGrid>

          <!-- Achtung: Hier nicht dynamic="true" angeben. Sonst funktioniert die umgebende Form nicht mehr. -->
          <prime:tabView>
            <prime:tab
              id="tabFirmaKontaktdaten"
              title="Kontaktdaten">
              <prime:fieldset
                id="firmaBesuchsAdresse"
                legend="Besuchsadresse">
                <provs:inputAdresse value="#{firmenVerwaltungModel.currentFirma.besuchsAdresse}" />
              </prime:fieldset>

              <prime:fieldset
                id="firmaPostAdresse"
                legend="Postadresse">
                <provs:inputPostAdresse value="#{firmenVerwaltungModel.currentFirma.postAdresse}" />
              </prime:fieldset>

              <prime:fieldset
                id="telekommunikation"
                legend="Telekommunikation">
                <h:panelGrid
                  columns="3"
                  rules="none"
                  rowClasses="topAlign">
                  <h:outputLabel
                    value="Telefon:"
                    for="firmaTelefonNummer" />
                  <prime:inputText
                    value="#{firmenVerwaltungModel.currentFirma.telefonNummer}"
                    size="18"
                    id="firmaTelefonNummer" />
                  <prime:message
                    for="firmaTelefonNummer"
                    display="text" />

                  <h:outputLabel
                    value="Fax:"
                    for="firmaFaxNummer" />
                  <prime:inputText
                    value="#{firmenVerwaltungModel.currentFirma.faxNummer}"
                    size="18"
                    id="firmaFaxNummer" />
                  <prime:message
                    for="firmaFaxNummer"
                    display="text" />

                  <h:outputLabel
                    value="Mail:"
                    for="firmaMailAdresse" />
                  <prime:inputText
                    value="#{firmenVerwaltungModel.currentFirma.mailAdresse}"
                    size="40"
                    id="firmaMailAdresse" />
                  <prime:message
                    for="firmaMailAdresse"
                    display="text" />
                </h:panelGrid>
              </prime:fieldset>
            </prime:tab>

            <prime:tab
              id="tabFirmaStandorte"
              title="Standorte">
              <h:panelGrid
                columns="3"
                rowClasses="topAlign">
                <prime:dataTable
                  value="#{firmenVerwaltungModel.currentFirma.standorte}"
                  var="standort"
                  rowStyleClass="#{standort eq firmenVerwaltungModel.currentStandort ? 'selected' : null}">
                  <prime:column style="width:66px">
                    <f:facet name="header">
                      <prime:commandButton
                        icon="ui-icon-plus"
                        title="hinzufügen"
                        ajax="false"
                        actionListener="#{firmenVerwaltungModel.createStandort}" />
                    </f:facet>
                    <prime:commandButton
                      icon="ui-icon-pencil"
                      title="bearbeiten"
                      ajax="false"
                      actionListener="#{firmenVerwaltungModel.editStandort(standort)}" />
                    <prime:commandButton
                      icon="ui-icon-close"
                      title="löschen"
                      ajax="false"
                      actionListener="#{firmenVerwaltungModel.deleteStandort(standort)}" />
                  </prime:column>
                  <prime:column headerText="Name">
                    <h:outputText value="#{standort.toString()}" />
                  </prime:column>
                </prime:dataTable>

                <prime:spacer width="20" />

                <h:panelGroup
                  id="standortDetails"
                  rendered="#{not empty firmenVerwaltungModel.currentStandort}">
                  <h:panelGrid
                    columns="3"
                    rules="none"
                    width="100%"
                    rowClasses="topAlign">
                    <h:outputLabel
                      value="Name:"
                      for="standortName" />
                    <prime:inputText
                      value="#{firmenVerwaltungModel.currentStandort.name}"
                      size="100"
                      id="standortName" />
                    <prime:message
                      for="standortName"
                      display="text" />
                  </h:panelGrid>

                  <prime:fieldset
                    id="standortBesuchsAdresse"
                    legend="Besuchsadresse">
                    <provs:inputAdresse value="#{firmenVerwaltungModel.currentStandort.besuchsAdresse}" />
                  </prime:fieldset>

                  <prime:fieldset
                    id="standortPostAdresse"
                    legend="Postadresse">
                    <provs:inputPostAdresse value="#{firmenVerwaltungModel.currentStandort.postAdresse}" />
                  </prime:fieldset>

                  <prime:fieldset
                    id="standortTelekommunikation"
                    legend="Telekommunikation">
                    <h:panelGrid
                      columns="3"
                      rules="none"
                      rowClasses="topAlign">
                      <h:outputLabel
                        value="Telefon:"
                        for="standortTelefonNummer" />
                      <prime:inputText
                        value="#{firmenVerwaltungModel.currentStandort.telefonNummer}"
                        size="18"
                        id="standortTelefonNummer" />
                      <prime:message
                        for="standortTelefonNummer"
                        display="text" />

                      <h:outputLabel
                        value="Fax:"
                        for="standortFaxNummer" />
                      <prime:inputText
                        value="#{firmenVerwaltungModel.currentStandort.faxNummer}"
                        size="18"
                        id="standortFaxNummer" />
                      <prime:message
                        for="standortFaxNummer"
                        display="text" />

                      <h:outputLabel
                        value="Mail:"
                        for="standortMailAdresse" />
                      <prime:inputText
                        value="#{firmenVerwaltungModel.currentStandort.mailAdresse}"
                        size="40"
                        id="standortMailAdresse" />
                      <prime:message
                        for="standortMailAdresse"
                        display="text" />
                    </h:panelGrid>
                  </prime:fieldset>
                </h:panelGroup>
              </h:panelGrid>
            </prime:tab>

            <prime:tab
              id="tabFirmaMitarbeiter"
              title="Mitarbeiter">
              <h:panelGrid
                columns="3"
                rowClasses="topAlign">
                <prime:dataTable
                  value="#{firmenVerwaltungModel.currentFirma.mitarbeiter}"
                  var="mitarbeiter"
                  rowStyleClass="#{mitarbeiter eq firmenVerwaltungModel.currentMitarbeiter ? 'selected' : null}">
                  <prime:column style="width:66px">
                    <f:facet name="header">
                      <prime:commandButton
                        icon="ui-icon-plus"
                        title="hinzufügen"
                        ajax="false"
                        action="#{firmenVerwaltungModel.createMitarbeiter}" />
                    </f:facet>
                    <prime:commandButton
                      icon="ui-icon-pencil"
                      title="bearbeiten"
                      ajax="false"
                      action="#{firmenVerwaltungModel.editMitarbeiter(mitarbeiter)}" />
                    <prime:commandButton
                      icon="ui-icon-close"
                      title="löschen"
                      ajax="false"
                      action="#{firmenVerwaltungModel.deleteMitarbeiter(mitarbeiter)}" />
                  </prime:column>
                  <prime:column headerText="Name">
                    <h:outputText value="#{mitarbeiter.person.toString()}" />
                  </prime:column>
                  <prime:column headerText="Standort">
                    <h:outputText value="#{mitarbeiter.standort.toString()}" rendered="#{not empty mitarbeiter.standort}" />
                  </prime:column>
                </prime:dataTable>

                <prime:spacer width="20" />

                <h:panelGroup
                  id="mitarbeiterDetails"
                  rendered="#{not empty firmenVerwaltungModel.currentMitarbeiter}">
                  <h:panelGrid
                    columns="3"
                    rules="none"
                    width="100%"
                    rowClasses="topAlign">
                    <h:outputLabel
                      value="Name:"
                      for="mitarbeiterPerson" />
                    <prime:autoComplete
                      id="mitarbeiterPerson"
                      value="#{firmenVerwaltungModel.currentMitarbeiter.person}"
                      var="person"
                      itemLabel="#{person}"
                      itemValue="#{person}"
                      completeMethod="#{firmenVerwaltungModel.completePerson}" />
                    <prime:message
                      for="mitarbeiterPerson"
                      display="text" />

                    <h:outputLabel
                      value="Typ:"
                      for="mitarbeiterTyp" />
                    <prime:selectOneMenu
                      value="#{firmenVerwaltungModel.currentMitarbeiter.mitarbeitsTyp}"
                      id="mitarbeiterTyp">
                      <f:selectItem
                        itemLabel=""
                        itemValue="" />
                      <f:selectItems value="#{enumHelper.mitarbeitsTypValues}" />
                    </prime:selectOneMenu>
                    <prime:message
                      for="mitarbeiterTyp"
                      display="text" />

                    <h:outputLabel
                      value="Abteilung:"
                      for="mitarbeiterAbteilung" />
                    <prime:inputText
                      value="#{firmenVerwaltungModel.currentMitarbeiter.abteilung}"
                      size="40"
                      id="mitarbeiterAbteilung" />
                    <prime:message
                      for="mitarbeiterAbteilung"
                      display="text" />

                    <h:outputLabel
                      value="Standort:"
                      for="mitarbeiterStandort" />
                    <h:selectOneMenu
                      value="#{firmenVerwaltungModel.currentMitarbeiter.standort}"
                      id="mitarbeiterStandort">
                      <f:selectItem
                        itemLabel=""
                        itemValue="" />
                      <f:selectItems
                        value="#{firmenVerwaltungModel.currentFirma.standorte}"
                        var="standort"
                        itemLabel="#{standort.name}"
                        itemValue="#{standort}" />
                    </h:selectOneMenu>
                    <prime:message
                      for="mitarbeiterStandort"
                      display="text" />

                    <h:outputLabel
                      value="Telefonnummern:"
                      for="mitarbeiterTelefon" />
                    <prime:inputTextarea
                      value="#{firmenVerwaltungModel.currentMitarbeiter.telefonNummernAsString}"
                      cols="40"
                      rows="3"
                      id="mitarbeiterTelefon" />
                    <prime:message
                      for="mitarbeiterTelefon"
                      display="text" />

                    <h:outputLabel
                      value="Mail:"
                      for="mitarbeiterMailAdresse" />
                    <prime:inputText
                      value="#{firmenVerwaltungModel.currentMitarbeiter.mailAdresse}"
                      size="40"
                      id="mitarbeiterMailAdresse" />
                    <prime:message
                      for="mitarbeiterMailAdresse"
                      display="text" />

                  </h:panelGrid>
                </h:panelGroup>
              </h:panelGrid>
            </prime:tab>
          </prime:tabView>
        </h:form>
      </prime:layoutUnit>
    </ui:define>
  </ui:composition>
</h:body>
</html>